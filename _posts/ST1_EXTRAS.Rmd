---
title: "Extras - Análise do Ativo TPIS3.SA"
description: |
  Welcome to our new blog, Adriel's Blog. We hope you enjoy 
  reading what we have to say!
author:
  - name: Nora Jones 
    url: https://example.com/norajones
    affiliation: Spacely Sprockets
    affiliation_url: https://example.com/spacelysprokets
date: 12-12-2019
output:
  distill::distill_article:
    self_contained: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# libraries
library(dplyr)
library(readr)
library(forecast)
library(ggfortify)
library(tseries)
library(lubridate)
library(quantmod)
library(lubridate)

dt <- readRDS('~/Documents/EDIT_DB/R_FILES/Datasets/ST1_dt.csv')
```

# Análises de Outliers

Já que em nossos três modelos válidos temos ruídos brancos gaussianos. Proponhamos uma forma de identificar outliers, ou seja, observações com ruídos foram do comum, fora do intervalo de 95% da sua respectiva distribuição.

\[
e_t \sim RBG(0, \sigma^2)
\]

Podemos então padronizar para uma Normal(0,1) e ver, basicamente, quais estão fora do intervalo de [-2,2], os quais são aproximações dos quantis de 5% e 95% da distribuição.

```{r, fig.align='center', echo = F}
fit_arima_ori <- dt %>%
  auto.arima()

a <- fit_arima_ori %>% residuals() %>% as.numeric()

c <- (a-mean(a))/sd(a) 

c %>% ts(start = c(2007,07), frequency = 12) %>% autoplot() + ggtitle('Erros Padronizados ARIMA(0,1,1)', 'Série Não Modificada')

```

```{r, fig.align='center', fig.height=3, echo = F}
fit_arima <- dt %>%
  window(start = c(2017,11)) %>%
  auto.arima()

a <- fit_arima %>% residuals() %>% as.numeric()

c <- (a-mean(a))/sd(a) 

c %>% ts(start = c(2017,11), frequency = 12) %>% autoplot() + ggtitle('Erros Padronizados ARIMA(0,1,0)', 'Série Modificada')

```


```{r, fig.align='center', echo = F, fig.height=3}
fit_ets <- dt %>%
  window(start = c(2017,11)) %>%
  ets()

a <- fit_ets %>% residuals() %>% as.numeric()

c <- (a-mean(a))/sd(a) 

c %>% ts(start = c(2017,11), frequency = 12) %>% autoplot() + ggtitle('Erros Padronizados ETS(M,N,N)', 'Série Modificada')

```


